<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>Pattern Animation Test</title>
    <!--CDN link for  TweenMax-->
    <!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js"></script> -->
    <script type="text/javascript" src="../Scripts/GSAP/plugins/CSSPlugin.min.js"></script>
    <script type="text/javascript" src="../Scripts/GSAP/easing/EasePack.min.js"></script>
    <script type="text/javascript" src="../Scripts/GSAP/TweenLite.min.js"></script>
    <style>
        body {
            background-color: #505050;
        }
    </style>
</head>

<body>
    <h2>Animation of a test pattern</h2>
    <svg id="rhythmLayout" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 215 100">
        <defs>
            <symbol id="ClubSymbol" style="overflow:visible">
                <path id="clubPath" style="opacity: 1; fill: rgb(235, 235, 235); fill-opacity: 1; stroke: rgb(0, 0, 0); stroke-linejoin: round; stroke-dasharray: none; stroke-dashoffset: 0; stroke-opacity: 1; stroke-width: 0.5;" d="M 0.5 6.984 C 8.459 10.407 15.413 10.152 20.416 7.584 C 22.12 6.821 23.976 6.128 25.977 6.063 C 25.977 6.063 34.166 5.7 37.993 5.808 C 38.017 7.077 40.501 7.077 40.5 5.833 C 40.5 5.833 40.468 4.345 40.482 4.158 C 40.501 2.98 38.017 2.98 38.016 4.237 C 34.17 4.243 31.628 4.019 25.85 3.783 C 23.255 3.748 22.12 3.236 20.37 2.392 C 15.413 -0.095 8.459 -0.35 0.566 2.956 C 0.53 3.763 0.513 5.713 0.5 6.984 Z"/>                
            </symbol>
            <marker orient="auto" refY="0" refX="0" id="ClubEnd" style="overflow:visible">
                <path style="opacity: 1; fill: rgb(235, 235, 235); fill-opacity: 1; stroke: rgb(0, 0, 0); stroke-linejoin: round; stroke-dasharray: none; stroke-dashoffset: 0; stroke-opacity: 1; stroke-width: 0.375;" d="M -12.5 -1.016 C -9.317 0.349 -6.535 0.247 -4.533 -0.776 C -3.852 -1.08 -3.11 -1.357 -2.309 -1.384 C -2.309 -1.384 0.966 -1.527 2.497 -1.484 C 2.507 -0.978 3.5 -0.978 3.5 -1.474 C 3.5 -1.474 3.487 -2.068 3.493 -2.142 C 3.5 -2.612 2.507 -2.612 2.507 -2.111 C 0.968 -2.108 -0.049 -2.197 -2.36 -2.292 C -3.398 -2.305 -3.852 -2.51 -4.552 -2.846 C -6.535 -3.837 -9.317 -3.939 -12.474 -2.621 C -12.488 -2.299 -12.495 -1.522 -12.5 -1.016 Z" transform="matrix(-1, 0, 0, -1, -9, -1.75)"/>
            </marker>
            <style type="text/css">
                .toss {stroke:#000000;
                        stroke-opacity:0.9;
                        stroke-width:2;
                        marker-end:url(#ClubEnd);
                    }
                .arm {fill:none;stroke:#000000;stroke-width:1}
                .head {fill:#ebebeb;stroke:#000000;stroke-width:1}
                .leftHand {fill:#e80000;stroke:#000000;stroke-width:1}
                .rightHand {fill:#00e800;stroke:#000000;stroke-width:1}
            </style>
        </defs>
        
        <use id="club" href="#ClubSymbol" transform="rotate(180, 42, 13)"/>
        
        <g>
            <g id="juggler-a" transform="translate(15,52)">
            <g id="torso-a" transform="rotate(-90)">
                <path class="arm leftArm "  d="m 30,18 c 0,-13.6 -5.76,-18.5 -18.7,-18.7"></path>
                <circle class="leftHand" r="7"  cx="30" cy="23"></circle>
                <path class="arm rightArm"    d="m -30,18   c 0,-13.6  5.76,-18.5  18.7,-18.7"></path>
                <circle class="rightHand"  r="7"   cx="-30" cy="23"></circle>
            </g>
            <circle class="head"      r="12" cy="0" cx="0"></circle>
            <text class="name" y="4" x="-4" xml:space="preserve">A</text>
            </g>
            <g id="juggler-b" transform="translate(200,52)">
            <g id="torso-b" transform="rotate(90)">
                <path class="arm leftArm" d="m 30,18 c 0,-13.6 -5.76,-18.5 -18.7,-18.7"></path>
                <circle class="leftHand" r="7"  cx="30" cy="23"></circle>
                <path class="arm rightArm"    d="m -30,18   c 0,-13.6  5.76,-18.5  18.7,-18.7"></path>
                <circle class="rightHand"  r="7"   cx="-30" cy="23"></circle>
            </g>
            <circle class="head"      r="12" cy="0" cx="0"></circle>
            <text class="name" y="4" x="-4" xml:space="preserve">B</text>
            </g>
        </g>
        
        <path id="AR-3PB" d="M  43,87 168,87"   class="toss" display="none"/>
        <path id="AR-3DB" d="M  43,87 168,26"   class="toss" display="none"/>
        <path id="AR-3SA" d="M  43,85  43,26"   class="toss" display="none"/>
        <path id="AL-3PB" d="M  43,26 168,26"   class="toss" display="none"/>
        <path id="AL-3DB" d="M  43,26 169,87"   class="toss" display="none"/>
        <path id="AL-3SA" d="M  43,26  43,74"   class="toss" display="none"/>
        <path id="BR-3PA" d="M 172,18  47,18"   class="toss" display="none"/>
        <path id="BR-3DA" d="M 172,18  47,77"   class="toss" display="none"/>
        <path id="BR-3SB" d="M 172,18 172,75"   class="toss" display="none"/>
        <path id="BL-3PA" d="M 172,77  47,77"   class="toss" display="none"/>
        <path id="BL-3DA" d="M 172,77  47,18"   class="toss" display="none"/>
        <path id="BL-3SB" d="M 172,77 172,26"   class="toss" display="none"/>
        <path id="AR-3HA" d="m  43,76 c  1.20245,-1.83893  2.93952,-3.32376  4.94317,-4.22538 2.00366,-0.90161 4.267,-1.21691 6.44079,-0.89723 2.17379,0.31967 4.25054,1.27322 5.9098,2.7135 1.65925,1.44027 2.89531,3.36233 3.51744,5.46958 0.80786,2.73636 0.55768,5.77071 -0.68746,8.3378 -1.24514,2.56709 -3.47318,4.64209 -6.12224,5.70172 -2.64906,1.05962 -5.69352,1.09361 -8.36557,0.0934 -2.67206,-1.00022 -4.94588,-3.02496 -6.24802,-5.56361" class="toss" display="none"/>
        <path id="AL-3HA" d="m  43,25 c  1.20245,1.83893   2.93952,3.323759  4.94317,4.225379 2.00366,0.90161 4.267,1.21691 6.44079,0.89723 2.17379,-0.31967 4.25054,-1.27322 5.9098,-2.713499 1.65925,-1.44027 2.89531,-3.36233 3.51744,-5.46958 0.80786,-2.736361 0.55768,-5.77071 -0.68746,-8.3378 -1.24514,-2.56709 -3.47318,-4.64209 -6.12224,-5.70172 -2.64906,-1.0596201 -5.69352,-1.0936101 -8.36557,-0.0934 -2.67206,1.00022 -4.94588,3.02496 -6.24802,5.56361" class="toss" display="none"/>
        <path id="BR-3HB" d="m 172,25 c -1.20245,1.83893  -2.93952,3.32376  -4.94317,4.22538 -2.00366,0.90161 -4.267,1.21691 -6.44079,0.89723 -2.17379,-0.31967 -4.25054,-1.27322 -5.9098,-2.7135 -1.65925,-1.44027 -2.89531,-3.36233 -3.51744,-5.46958 -0.80786,-2.73636 -0.55768,-5.77071 0.68746,-8.3378 1.24514,-2.56709 3.47318,-4.64209 6.12224,-5.7017203 2.64906,-1.05962 5.69352,-1.09361 8.36557,-0.0934 2.67206,1.0002203 4.94588,3.0249603 6.24802,5.5636103" class="toss" display="none"/>
        <path id="BL-3HB" d="m 172,76 c -1.20245,-1.83893 -2.93952,-3.32376 -4.94317,-4.22538 -2.00366,-0.90161 -4.267,-1.21691 -6.44079,-0.89723 -2.17379,0.31967 -4.25054,1.27322 -5.9098,2.7135 -1.65925,1.44027 -2.89531,3.36233 -3.51744,5.46958 -0.80786,2.73636 -0.55768,5.77071 0.68746,8.3378 1.24514,2.56709 3.47318,4.64209 6.12224,5.70172 2.64906,1.05962 5.69352,1.09361 8.36557,0.0934 2.67206,-1.00022 4.94588,-3.02496 6.24802,-5.56361"      class="toss" display="none"/>
    </svg>

    <p id="errorDisplay"></p>
    <script>
        function displayToss(toss_) {
            var length = toss_.getTotalLength();
            toss_.style.display = "inline";
            var dashLength = length * 0.10;
            toss_.style.strokeDasharray = [dashLength, dashLength];
            toss_.style.strokeDashoffset = length;
        }

        window.onload = function() {
            var svgObject = document.getElementById("rhythmLayout");
            var errElement = document.getElementById("errorDisplay");
            var svgDoc = svgObject;
            if (svgDoc == null) {
                errElement.textContent = "Unable to load the image";
                return;
            }

            var toss = svgDoc.getElementById("AR-3DB");
            displayToss(toss);

            try {
                TweenLite.to(toss, 4, {
                    strokeDashoffset: 0,
                    ease: Power0.easeNone
                });
            } catch (err) {
                errElement.textContent = "Exception from animation";
            }

        }
    </script>
</body>

</html>